<!DOCTYPE html>
<html>
<head>
  <title>ë¡œì»¬ ì‹œê°„ ê¸°ì¤€ ì˜ˆì•½ ì ‘ì†</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #status { margin-top: 20px; font-weight: bold; color: green; }
    #clock { font-size: 20px; font-weight: bold; margin-bottom: 15px; color: navy; }
  </style>
</head>
<body>
  <h2>ì˜ˆì•½ëœ ì‹œê°„ì— ë§í¬ ìë™ ì ‘ì† (ë¸Œë¼ìš°ì € ì‹œê°„ ê¸°ì¤€)</h2>

  <div id="clock">í˜„ì¬ ì‹œê°: --:--:--</div>

  <label>URL: <input type="text" id="url" placeholder="https://example.com" style="width:300px;"></label><br><br>
  <label>ì‹œê°„: <input type="time" id="time"></label><br><br>
  <button onclick="schedule()">ì˜ˆì•½</button>

  <div id="status"></div>

  <script>
    let interval = null;

    // ğŸ” í˜„ì¬ ì‹œê° ì‹¤ì‹œê°„ í‘œì‹œ
    function updateClock() {
      const now = new Date();
      const hh = String(now.getHours()).padStart(2, '0');
      const mm = String(now.getMinutes()).padStart(2, '0');
      const ss = String(now.getSeconds()).padStart(2, '0');
      document.getElementById('clock').innerText = `í˜„ì¬ ì‹œê°: ${hh}:${mm}:${ss}`;
    }
    setInterval(updateClock, 1000);
    updateClock(); // ì²« ë¡œë”© ì‹œ ì¦‰ì‹œ í‘œì‹œ

    function schedule() {
      const url = document.getElementById('url').value;
      const time = document.getElementById('time').value;
      const status = document.getElementById('status');

      if (!url || !time) {
        status.innerText = "âš ï¸ URLê³¼ ì‹œê°„ì„ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”.";
        status.style.color = "red";
        return;
      }

      const now = new Date();
      const [hh, mm] = time.split(":").map(Number);
      const target = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hh, mm, 0, 0);

      const delay = target - now;
      if (delay <= 0) {
        status.innerText = "âš ï¸ ë¯¸ë˜ ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”.";
        status.style.color = "red";
        return;
      }

      const endTime = new Date(now.getTime() + delay);
      startCountdown(endTime, url);
      alert("ì˜ˆì•½ ì™„ë£Œ!");
    }

    function startCountdown(endTime, url) {
      const status = document.getElementById('status');
      clearInterval(interval);

      interval = setInterval(() => {
        const now = new Date();
        const remain = endTime - now;

        if (remain <= 0) {
          clearInterval(interval);
          status.innerText = "âœ… ì ‘ì† ì¤‘...";
          status.style.color = "blue";
          window.open(url, "_blank");
          return;
        }

        const sec = Math.floor(remain / 1000);
        status.innerText = `â³ ì˜ˆì•½ë¨: ${sec}ì´ˆ ë‚¨ìŒ`;
        status.style.color = "green";
      }, 1000);
    }
  </script>
</body>
</html>
